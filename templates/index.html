{% extends 'base.html' %}


{% block title %}
<title>Home page</title>
{% endblock %}


{% block content %}
<main>
    <div class="banner card container">
        <div class="banner__left">
            <button id="{{ main_categories.0.photo }}" onclick="banner_btn(this)" class="banner__left__btn-active">{{ main_categories.0.name }}</button>
            {% for i in main_categories|slice:"1:" %}
            <button id="{{ i.photo }}" onclick="banner_btn(this)" class="banner__left__btn">{{ i.name }}</button>
            {% endfor %}
        </div>
        <div class="banner__right">
            <div class="banner__image" style="background-image: url('media/{{ main_categories.0.photo }}');"></div>
            <div class="banner__right-content">
                <h1 class="banner__right__header">{{ main_categories.0.name }}</h1>
                <a href="{% url 'shop' %}" id="offers" class="banner__right__btn text-default-white">View products</a>
            </div>
        </div>
    </div>
    <div class="offers card container" id="categories">
        <div class="offers__left">
            <div class="offers__left__text">
                <h3>Deals and offers</h3>
                <p class="text-default text-muted">Hygiene equipments</p>
            </div>
            <div class="offers__left__countdown">
                <div class="offers__left__countdown-item" id="days">
                    <p class="text-700-white">00</p>
                    <p class="text-micro-white">Days</p>
                </div>
                <div class="offers__left__countdown-item" id="hours">
                    <p class="text-700-white">00</p>
                    <p class="text-micro-white">Hours</p>
                </div>
                <div class="offers__left__countdown-item" id="minutes">
                    <p class="text-700-white">00</p>
                    <p class="text-micro-white">Min</p>
                </div>
                <div class="offers__left__countdown-item" id="seconds">
                    <p class="text-700-white">00</p>
                    <p class="text-micro-white">Sec</p>
                </div>
            </div>
        </div>
        <div class="offers__right">
            {% for i in products_on_sale %}
            <a href="{% url 'shop' %}" class="offers__right-item">
                <div class="image-container">
                    <img src="/media/{{ i.1 }}" alt="" class="zoomable-image">
                    <div class="overlay"></div>
                    <div class="eye" style='background: url("/media/eye.png") no-repeat center center / cover;'></div>
                </div>
                <p class="text-default">{{ i.0.name }}</p>
                <div class="offers__right__sale">
                    <p>-{{ i.sale }}%</p>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    <div class="categories card container" id="help">
        <div class="categories__left">
            <div class="categories__left__image" style="background-image: url('/media/categories_bg.png');"></div>
            <div class="categories__left-content">
                <h3>Consumer electronics and gadgets</h3>
                <a href="" class="banner__right__btn text-default-white">View</a>
            </div>
        </div>
        <div class="categories__right">
            {% for i in main_categories %}
            <a href="{% url 'shop' %}" class="categories__right-item">
                <div class="categories__right-item-content">
                    <p class="text-default">{{ i.name }}</p>
                    <p class="text-micro text-muted">From<br>340$</p>
                </div>
                <img src="/media/{{ i.photo }}" class="categories__right-item__photo" alt="">
            </a>
            {% endfor %}
        </div>
    </div>
    <div class="message container">
        <div class="message__photo" style="background-image: url('/media/message_bg.png');"></div>
        <div class="message__left">
            <h1 class="header-white">An easy way to send requests to all suppliers</h1>
            <p class="text-default-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.</p>
        </div>
        <div class="message__right">
            <div class="message__right-content">
                <h3>Want to ask a question?</h3>
                <form method="post" class="message__right__form">
                    <!-- {% csrf_token %} -->
                    <input type="text" name="question_title" class="default-input text-default" placeholder="Question">
                    <textarea name="question" cols="30" rows="4" class="default-textarea text-default" placeholder="Write more about the question"></textarea>
                    <button class="banner__right__btn text-default-white" id="recommended">Ask a question</button>
                </form>
            </div>
        </div>
    </div>
    <div class="recommended container">
        <h2>Recommended items</h2>
        <div class="recommended__cards">
            {% for i in products %}
            <a href="{% url 'shop' %}" class="recommended__card card">
                <div class="image-container2">
                    <img src="/media/{{ i.1 }}" alt="" class="recommended__card__photo">
                    <div class="overlay"></div>
                    <div class="eye2" style='background: url("/media/eye.png") no-repeat center center / cover;'></div>
                </div>
                <div class="recommended__card-text">
                    <p class="text-500">${{ i.0.price }}</p>
                    <p class="text-default text-muted">{{ i.0.name }}</p>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    <div class="brands-wrapper container">
        <h2 id="brands">Our brands</h2>
        <div class="brands">
            <a href="" class="brand">
                <img src="/media/logos/asus.png" alt="">
            </a>
            <a href="" class="brand">
                <img src="/media/logos/logitech.png" alt="">
            </a>
            <a href="" class="brand">
                <img src="/media/logos/nvidia.png" alt="">
            </a>
            <a href="" class="brand">
                <img src="/media/logos/iphone.png" alt="">
            </a>
            <a href="" class="brand">
                <img src="/media/logos/samsung.png" alt="">
            </a>
        </div>
    </div>
</main>
<script>
    function open_menu() {
        document.querySelector('.mobile-menu-wrapper').hidden = false;
    }
    document.querySelector('.mobile-menu-wrapper').addEventListener('click', function() {
        document.querySelector('.mobile-menu-wrapper').hidden = true;
    })
</script>
<script>
    images = document.querySelectorAll('.image-container')
    images.forEach(function (i) {
        i.addEventListener('click', function(event) {
            event.preventDefault();
            document.getElementById('zoom-modal').style.display = 'block';
            let src
            if (event.target.classList[0] == 'eye') {
                src = event.target.previousElementSibling.previousElementSibling
            } else {
                src = event.target.previousElementSibling
            }
            document.getElementById('zoom-modal').children[0].src = src.src
        });
    })
    document.getElementById('zoom-modal').addEventListener('click', function () {
        document.getElementById('zoom-modal').style.display = 'none';
    })
</script>
<script>
    images = document.querySelectorAll('.image-container2')
    images.forEach(function (i) {
        i.addEventListener('click', function(event) {
            event.preventDefault();
            document.getElementById('zoom-modal').style.display = 'block';
            let src
            if (event.target.classList[0] == 'eye2') {
                src = event.target.previousElementSibling.previousElementSibling
            } else {
                src = event.target.previousElementSibling
            }
            document.getElementById('zoom-modal').children[0].src = src.src
        });
    })
    document.getElementById('zoom-modal').addEventListener('click', function () {
        document.getElementById('zoom-modal').style.display = 'none';
    })
</script>
<script>
    let banner_image = document.querySelector('.banner__image')
    let banner_header = document.querySelector('.banner__right__header')
    function banner_btn(btn) {
        let active = document.querySelector('.banner__left__btn-active')
        active.classList.remove('banner__left__btn-active')
        active.classList.add('banner__left__btn')
        btn.classList.remove('banner__left__btn')
        btn.classList.add('banner__left__btn-active')
        banner_image.style.backgroundImage = 'url(media/' + btn.id + ')';
        banner_header.textContent = btn.textContent
    }
</script>
<script>
    setInterval(function () {
        let active = document.querySelector('.banner__left__btn-active')
        if (active.nextElementSibling != null) {
            active.nextElementSibling.click()
        } else {
            document.querySelector('.banner__left__btn').click()
        }
    }, 3000)
</script>
<script>
    const countDownDate = new Date("{{ closest_date_sale }}").getTime();
    const x = setInterval(function() {
    const now = new Date().getTime();
    const distance = countDownDate - now;
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
    document.getElementById("days").children[0].innerHTML = days;
    document.getElementById("hours").children[0].innerHTML = hours;
    document.getElementById("minutes").children[0].innerHTML = minutes;
    document.getElementById("seconds").children[0].innerHTML = seconds;
    if (distance < 0) {
        clearInterval(x);
        document.getElementById("days").innerHTML = "EXPIRED";
    }
}, 1000);
</script>
<script>
    function open_menu() {
        document.querySelector('.mobile-menu-wrapper').hidden = false;
    }
    document.querySelector('.mobile-menu-wrapper').addEventListener('click', function() {
        document.querySelector('.mobile-menu-wrapper').hidden = true;
    })
</script>
{% endblock %}